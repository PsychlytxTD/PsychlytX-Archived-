---
title: "Mindful Attention Awareness Scale (MAAS)"
author: "Analytics Report generated by Sentient Psychometrics"
date: "`r format(Sys.time(), '%d %B, %Y')`"
geometry: "left=2cm,right=2cm,top=1.5cm,bottom=1.2cm"
output:
  pdf_document:
    latex_engine: pdflatex
header-includes:
- \usepackage[fontsize=7.8pt]{scrextend}
- \usepackage{color}
- \usepackage{booktabs}
- \usepackage[table]{xcolor}
fontfamily: arev
always_allow_html: yes
params:
Imp_Df: 'NULL'
Sig_Imp_Df: 'NULL'
Scale_Report_Df: 'NULL'
Periods: 'NULL'
---


\begingroup\Large

\begin{center} \textbf{Information About the Mindful Attention Awareness Scale (MAAS)} \end{center} 

#What it Measures: 

* Dispositional mindfulness, described by the scale authors as "a receptive state of mind in which attention, informed by a sensitive awareness of what is occuring in the present, simply observes what is taking place" (Brown, letter providing permission for use). 


#What Higher Scores Mean:

* Higher levels of dispositional mindfulness.


#Scale Quality:

* The MAAS is one of the most widely used instruments for assessing trait mindfulness. However, there are likely to be conceptual limititations in any measure purporting to measure mindfulness, given the complexity of this construct. 

#Scale Structure:

* Research has supported a single-factor structure (Brown & Ryan, 2003). 

\endgroup
\newpage

```{r, echo = FALSE, warning = FALSE, comment = NA, results = 'asis'}

    #MAAS nonsig calculations 
    
    MAAS_Imp_Df<-dplyr::select(Imp_Df, contains("MAAS.Fullscale"))

    
    MAAS_Imp_Df<-as.data.frame(gather(MAAS_Imp_Df, "Outcome", "Value") %>% na.omit() %>% count(Outcome,Value) %>% mutate(Percentage = paste0(round(100 * n/sum(n), 0), "%"))) %>% dplyr::filter(Value == "Yes") %>% dplyr::select(-c(Outcome,Value))

    
    
    #MAAS sig calculations
    
    
    MAAS_Sig_Imp_Df<-dplyr::select(Sig_Imp_Df, contains("MAAS.Fullscale"))

    
    MAAS_Sig_Imp_Df<-as.data.frame(gather(MAAS_Sig_Imp_Df, "Outcome", "Value") %>% na.omit() %>% count(Outcome,Value) %>% mutate(Percentage = paste0(round(100 * n/sum(n), 0), "%"))) %>% dplyr::filter(Value == "Yes") %>% dplyr::select(-c(Outcome,Value))

    
    Improvement_Type<- c("Improvement", "Statistically Reliable Improvement")
    
    Sig_Null<- data.frame(n = "NA", Percentage = "NA")
    
    
     if(nrow(MAAS_Imp_Df) == 1 & nrow(MAAS_Sig_Imp_Df) == 1) {
      MAAS_Percentages<- rbind(MAAS_Imp_Df, MAAS_Sig_Imp_Df)
      MAAS_Percentages<- cbind(Improvement_Type, MAAS_Percentages)
    }  else if(nrow(MAAS_Imp_Df) == 1 & nrow(MAAS_Sig_Imp_Df) == 0) {
      MAAS_Percentages = rbind(MAAS_Imp_Df, Sig_Null)
       MAAS_Percentages<- cbind(Improvement_Type, MAAS_Percentages)
    } else if(nrow(MAAS_Imp_Df) == 0) {
      MAAS_Percentages<- data.frame(x = c("NA", "NA"), y = c("NA", "NA"))
      MAAS_Percentages<- cbind(Improvement_Type, MAAS_Percentages)
    }

     names(MAAS_Percentages)<- c( "", "Number of Cases Improved", "Percentage of Cases Improved")
    
     
    Scale_Names<- c("MAAS Total")
    
    MAAS_M_Intake<- Scale_Report_Df %>% select(contains("First.Score")) %>% select(contains("MAAS")) %>% summarise_all(funs(round(mean(., na.rm = TRUE), digits = 2))) %>% rename_all(funs(c(Scale_Names)))
    MAAS_M_Discharge<- Scale_Report_Df %>% select(contains("Last.Score")) %>% select(contains("MAAS")) %>% summarise_all(funs(round(mean(., na.rm = TRUE), digits = 2))) %>% rename_all(funs(c(Scale_Names)))
    MAAS_M_Change<- Scale_Report_Df %>% select(contains("Change")) %>% select(contains("MAAS")) %>% summarise_all(funs(round(mean(., na.rm = TRUE), digits = 2))) %>% rename_all(funs(c(Scale_Names)))
    MAAS_Range<- c("Total Scale" = "1-6")

    
    MAAS_Descriptives<- rbind(MAAS_M_Intake, MAAS_M_Discharge, MAAS_M_Change, MAAS_Range)
    Data<- c("Mean Intake Score", "Mean Discharge Score", "Mean Change", "Range of Possible Scores")
    MAAS_Descriptives<- cbind(Data, MAAS_Descriptives)
  
```

##Mindful Attention Awareness Scale

```{r,echo=FALSE,warning=FALSE,comment=NA,results='asis'}

kable(MAAS_Percentages, booktabs = T, format = "latex") %>% kable_styling(position = "left", full_width = T, latex_options = "striped") %>% row_spec(0, bold = T) 
```

```{r,echo=FALSE,warning=FALSE,comment=NA, fig.width = 4, fig.height = 1.9, fig.align='left'}
  
#MAAS Graph
    
    MAAS_Reformat<- dplyr::select(Scale_Report_Df, Name, MAAS.Fullscale.First.Score, MAAS.Fullscale.Last.Score)
    MAAS_Reformat<- MAAS_Reformat %>% rename(Pre = MAAS.Fullscale.First.Score, Post = MAAS.Fullscale.Last.Score)
    MAAS_Reformat<- MAAS_Reformat %>% dplyr::filter(complete.cases(Pre, Post))

    MAAS_Reformat<- gather(MAAS_Reformat, Group, MAAS.Total.Score, Pre:Post)
    MAAS_Reformat$Group<- factor(MAAS_Reformat$Group, levels=unique(MAAS_Reformat$Group))
    
    MAAS_Plot<- ggplot(data = MAAS_Reformat, aes (x = factor(Group), y = MAAS.Total.Score, group = Name))
    MAAS_Plot<- MAAS_Plot + geom_line() + xlab("Time") + ylab("MAAS Total") 
    
    MAAS_Plot + scale_y_continuous(limits = c(1, 6), breaks = c(1,2,3,4,5,6)) + scale_x_discrete(expand = c(0.2, 0)) + theme_bw() + theme(panel.background = element_rect("#f1f1f1"), axis.line = element_line(colour = "black"), panel.border = element_rect(colour = "#00004c", fill=NA, size=3)) + theme(axis.text.x =  element_text(size=9, family = "AvantGarde", color = "black", face = "bold"), axis.text.y = element_text(size=9, family = "AvantGarde", color = "black", face = "bold"), axis.title.x = element_text(size=9, family = "AvantGarde", face = "bold"), axis.title.y = element_text(size=9, family = "AvantGarde", face = "bold")) 
```


##Average Change Over Treatment Period

```{r,echo=FALSE,warning=FALSE,comment=NA,results='asis'}

kable(MAAS_Descriptives, booktabs = T, format = "latex") %>% kable_styling(position = "left", full_width = T, latex_options = "striped") %>% row_spec(0, bold = T)

```

##Reporting Period
```{r,echo = FALSE,warning=FALSE,comment = NA, results='asis'}


if(!is.null(Periods)) {
  cat(Periods, sep = ", ")
} else if (is.null(Periods)) {
  cat("No reporting period was specified. All cases with complete MAAS data were used.")
}


```